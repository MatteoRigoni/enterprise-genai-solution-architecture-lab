@page "/chat"
@rendermode InteractiveServer

<PageTitle>Chat</PageTitle>

<div class="chat-page">
    <div class="chat-header">
        <h1 class="text-title">Chat</h1>
        <p class="text-label">Chat with the AI assistant</p>
    </div>

    <div class="chat-messages">
        @if (!messages.Any())
        {
            <div class="chat-empty-state">
                <p class="text-body">No messages yet. Start a conversation below.</p>
            </div>
        }
        else
        {
            @foreach (var message in messages)
            {
                <div class="chat-message @message.CssClass">
                    <div class="message-content">
                        <div class="message-header">
                            <span class="message-role">@message.Role</span>
                            @if (!string.IsNullOrEmpty(message.CorrelationId))
                            {
                                <span class="message-correlation-id">ID: @message.CorrelationId</span>
                            }
                        </div>
                        <div class="message-text">@message.Text</div>
                    </div>
                </div>
            }
        }
        
        @if (!string.IsNullOrEmpty(errorMessage))
        {
            <div class="chat-error">
                <p class="text-body" style="color: var(--danger-0);">@errorMessage</p>
            </div>
        }
    </div>

    <div class="chat-input-area">
        <FluentTextField @bind-Value="currentMessage" 
                         Placeholder="Type your message here and press Enter or click Send..." 
                         class="chat-input"
                         disabled="@isSending">
        </FluentTextField>
        <FluentButton Appearance="Appearance.Accent" 
                      OnClick="HandleSend"
                      disabled="@(string.IsNullOrWhiteSpace(currentMessage) || isSending)"
                      class="chat-send-button">
            <span>ðŸ“¤</span> Send
        </FluentButton>
    </div>
</div>

